/*
 * Copyright 2019 Sparton
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include "dt-bindings/display/simple_panel_mipi_cmds.h"

/ {
	compatible = "variscite,imx8m-dart", "fsl,imx8mq";

	/delete-node/ leds;
	/delete-node/ gpio-keys;

	backlight: backlight {
		pwms = <&pwm2 0 1000000 0>;
		status = "okay";
	};

	gpio-keys {
		compatible = "gpio-keys";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_gpio_inputs>;

		GPIO220 {
			gpios = <&gpio2 20 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_WAKEUP>;
		};

		GPIO101 {
			gpios = <&gpio1 1 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_F1>;
		};

		GPIO301 {
			gpios = <&gpio3 1 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_F2>;
		};

		GPIO303 {
			gpios = <&gpio3 3 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_F3>;
		};

		GPIO306 {
			gpios = <&gpio3 6 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_F4>;
		};

		GPIO307 {
			gpios = <&gpio3 7 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_F5>;
		};

		GPIO308 {
			gpios = <&gpio3 8 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_F6>;
		};

		GPIO316 {
			gpios = <&gpio3 16 GPIO_ACTIVE_LOW>;
			linux,code = <KEY_F7>;
		};
	};

	gpio-leds {
		compatible = "gpio-leds";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_gpio_outputs>;


		GPIO309 {
			gpios = <&gpio3 9 GPIO_ACTIVE_LOW>;
		};

		GPIO310 {
			gpios = <&gpio3 10 GPIO_ACTIVE_LOW>;
		};

		GPIO314 {
			gpios = <&gpio3 14 GPIO_ACTIVE_LOW>;
		};

		GPIO315 {
			gpios = <&gpio3 15 GPIO_ACTIVE_LOW>;
		};

		GPIO322 {
			gpios = <&gpio3 22 GPIO_ACTIVE_LOW>;
		};

		GPIO324 {
			gpios = <&gpio3 24 GPIO_ACTIVE_LOW>;
		};

		GPIO325 {
			gpios = <&gpio3 25 GPIO_ACTIVE_LOW>;
		};

		USB1_TRIGn {
			gpios = <&gpio5 28 GPIO_ACTIVE_LOW>;
		};

		USB1_PWREN {
			gpios = <&gpio5 29 GPIO_ACTIVE_LOW>;
		};
	};

	mipi_cmds_nt35521z: mipi-cmds-nt35521z {
#if 1
/*******************************************************************************
 * the following sequence has been extracted from
 * https://android.googlesource.com/kernel/msm.git/+/android-msm-lego-3.10-marshmallow-dr/arch/arm/boot/dts/qcom/dsi-panel-nt35521-720p-video.dtsi
 * and changed to be parsed by panel simple driver as follow
 * - 29 01 00 00 00 00 LL => 0x80 | LL => generic write
 * - 23 01 00 00 00 00 LL => 0x80 | LL => generic write
 * - 05 01 00 00 00 00 LL => 0x00 | LL => DCS write
 * although missing, a 128 ms delay (0x40 0x80) has been introduced to be
 * compliant with NT35521Z datasheet specifications
 ******************************************************************************/
		mipi-cmds-init = /bits/ 8 <
			0x86 0xF0 0x55 0xAA 0x52 0x08 0x00
			0x83 0xB1 0x68 0x21
			0x82 0xB5 0xC8
			0x82 0xB6 0x0F
			0x85 0xB8 0x00 0x00 0x0A 0x00
			0x82 0xB9 0x00
			0x82 0xBA 0x02
			0x83 0xBB 0x63 0x63
			0x83 0xBC 0x00 0x00
			0x86 0xBD 0x02 0x7F 0x0D 0x0B 0x00
			0x91 0xCC 0x41 0x36 0x87 0x54 0x46 0x65 0x10 0x12 0x14 0x10 0x12 0x14 0x40 0x08 0x15 0x05
			0x82 0xD0 0x00
			0x91 0xD1 0x00 0x04 0x08 0x0C 0x10 0x14 0x18 0x1C 0x20 0x24 0x28 0x2C 0x30 0x34 0x38 0x3C
			0x82 0xD3 0x00
			0x83 0xD6 0x44 0x44
			0x8D 0xD7 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
			0x8E 0xD8 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
			0x83 0xD9 0x03 0x06
			0x83 0xE5 0x00 0xFF
			0x85 0xE6 0xF3 0xEC 0xE7 0xDF
			0x8B 0xE7 0xF3 0xD9 0xCC 0xCD 0xB3 0xA6 0x99 0x99 0x99 0x95
			0x8B 0xE8 0xF3 0xD9 0xCC 0xCD 0xB3 0xA6 0x99 0x99 0x99 0x95
			0x83 0xE9 0x00 0x04
			0x82 0xEA 0x00
			0x85 0xEE 0x87 0x78 0x00 0x00
			0x83 0xEF 0x07 0xFF
			0x86 0xF0 0x55 0xAA 0x52 0x08 0x01
			0x83 0xB0 0x0D 0x0D
			0x83 0xB1 0x0D 0x0D
			0x83 0xB3 0x2D 0x2D
			0x83 0xB4 0x19 0x19
			0x83 0xB5 0x06 0x06
			0x83 0xB6 0x05 0x05
			0x83 0xB7 0x05 0x05
			0x83 0xB8 0x05 0x05
			0x83 0xB9 0x44 0x44
			0x83 0xBA 0x36 0x36
			0x83 0xBC 0x50 0x00
			0x83 0xBD 0x50 0x00
			0x82 0xBE 0x39
			0x82 0xBF 0x39
			0x82 0xC0 0x0C
			0x82 0xC1 0x00
			0x83 0xC2 0x19 0x19
			0x83 0xC3 0x0A 0x0A
			0x83 0xC4 0x23 0x23
			0x84 0xC7 0x00 0x80 0x00
			0x87 0xC9 0x00 0x00 0x00 0x00 0x00 0x00
			0x82 0xCA 0x01
			0x83 0xCB 0x0B 0x53
			0x82 0xCC 0x00
			0x84 0xCD 0x0B 0x52 0x53
			0x82 0xCE 0x44
			0x84 0xCF 0x00 0x50 0x50
			0x83 0xD0 0x50 0x50
			0x83 0xD1 0x50 0x50
			0x82 0xD2 0x39
			0x82 0xD3 0x39
			0x86 0xF0 0x55 0xAA 0x52 0x08 0x02
			0x91 0xB0 0x00 0xAC 0x00 0xBA 0x00 0xD9 0x00 0xED 0x01 0x01 0x01 0x1E 0x01 0x3A 0x01 0x62
			0x91 0xB1 0x01 0x85 0x01 0xB8 0x01 0xE4 0x02 0x27 0x02 0x5B 0x02 0x5D 0x02 0x8C 0x02 0xBE
			0x91 0xB2 0x02 0xDF 0x03 0x0C 0x03 0x2A 0x03 0x51 0x03 0x6D 0x03 0x8D 0x03 0xA4 0x03 0xBE
			0x85 0xB3 0x03 0xCC 0x03 0xCC
			0x91 0xB4 0x00 0xAC 0x00 0xBA 0x00 0xD9 0x00 0xED 0x01 0x01 0x01 0x1E 0x01 0x3A 0x01 0x62
			0x91 0xB5 0x01 0x85 0x01 0xB8 0x01 0xE4 0x02 0x27 0x02 0x5B 0x02 0x5D 0x02 0x8C 0x02 0xBE
			0x91 0xB6 0x02 0xDF 0x03 0x0C 0x03 0x2A 0x03 0x51 0x03 0x6D 0x03 0x8D 0x03 0xA4 0x03 0xBE
			0x85 0xB7 0x03 0xCC 0x03 0xCC
			0x91 0xB8 0x00 0xAC 0x00 0xBA 0x00 0xD9 0x00 0xED 0x01 0x01 0x01 0x1E 0x01 0x3A 0x01 0x62
			0x91 0xB9 0x01 0x85 0x01 0xB8 0x01 0xE4 0x02 0x27 0x02 0x5B 0x02 0x5D 0x02 0x8C 0x02 0xBE
			0x91 0xBA 0x02 0xDF 0x03 0x0C 0x03 0x2A 0x03 0x51 0x03 0x6D 0x03 0x8D 0x03 0xA4 0x03 0xBE
			0x85 0xBB 0x03 0xCC 0x03 0xCC
			0x91 0xBC 0x00 0xAC 0x00 0xBA 0x00 0xD9 0x00 0xED 0x01 0x01 0x01 0x1E 0x01 0x3A 0x01 0x62
			0x91 0xBD 0x01 0x85 0x01 0xB8 0x01 0xE4 0x02 0x27 0x02 0x5B 0x02 0x5D 0x02 0x8C 0x02 0xBE
			0x91 0xBE 0x02 0xDF 0x03 0x0C 0x03 0x2A 0x03 0x51 0x03 0x6D 0x03 0x8D 0x03 0xA4 0x03 0xBE
			0x85 0xBF 0x03 0xCC 0x03 0xCC
			0x91 0xC0 0x00 0xAC 0x00 0xBA 0x00 0xD9 0x00 0xED 0x01 0x01 0x01 0x1E 0x01 0x3A 0x01 0x62
			0x91 0xC1 0x01 0x85 0x01 0xB8 0x01 0xE4 0x02 0x27 0x02 0x5B 0x02 0x5D 0x02 0x8C 0x02 0xBE
			0x91 0xC2 0x02 0xDF 0x03 0x0C 0x03 0x2A 0x03 0x51 0x03 0x6D 0x03 0x8D 0x03 0xA4 0x03 0xBE
			0x85 0xC3 0x03 0xCC 0x03 0xCC
			0x91 0xC4 0x00 0xAC 0x00 0xBA 0x00 0xD9 0x00 0xED 0x01 0x01 0x01 0x1E 0x01 0x3A 0x01 0x62
			0x91 0xC5 0x01 0x85 0x01 0xB8 0x01 0xE4 0x02 0x27 0x02 0x5B 0x02 0x5D 0x02 0x8C 0x02 0xBE
			0x91 0xC6 0x02 0xDF 0x03 0x0C 0x03 0x2A 0x03 0x51 0x03 0x6D 0x03 0x8D 0x03 0xA4 0x03 0xBE
			0x85 0xC7 0x03 0xCC 0x03 0xCC
			0x82 0xEE 0x00
			0x86 0xF0 0x55 0xAA 0x52 0x08 0x03
			0x83 0xB0 0x00 0x00
			0x83 0xB1 0x00 0x00
			0x86 0xB2 0x03 0x00 0x00 0x00 0x00
			0x86 0xB3 0x03 0x00 0x00 0x00 0x00
			0x86 0xB4 0x03 0x00 0x00 0x00 0x00
			0x86 0xB5 0x03 0x00 0x00 0x00 0x00
			0x86 0xB6 0x03 0x00 0x00 0x00 0x00
			0x86 0xB7 0x03 0x00 0x00 0x00 0x00
			0x86 0xB8 0x03 0x00 0x00 0x00 0x00
			0x86 0xB9 0x03 0x00 0x00 0x00 0x00
			0x86 0xBA 0x35 0x10 0x00 0x00 0x00
			0x86 0xBB 0x35 0x10 0x00 0x00 0x00
			0x86 0xBC 0x35 0x10 0x00 0x00 0x00
			0x86 0xBD 0x35 0x10 0x00 0x00 0x00
			0x85 0xC0 0x00 0x34 0x00 0x00
			0x85 0xC1 0x00 0x34 0x00 0x00
			0x85 0xC2 0x00 0x34 0x00 0x00
			0x85 0xC3 0x00 0x34 0x00 0x00
			0x82 0xC4 0x40
			0x82 0xC5 0x40
			0x82 0xC6 0x40
			0x82 0xC7 0x40
			0x82 0xEF 0x00
			0x86 0xF0 0x55 0xAA 0x52 0x08 0x05
			0x83 0xB0 0x1B 0x10
			0x83 0xB1 0x1B 0x10
			0x83 0xB2 0x1B 0x10
			0x83 0xB3 0x1B 0x10
			0x83 0xB4 0x1B 0x10
			0x83 0xB5 0x1B 0x10
			0x83 0xB6 0x1B 0x10
			0x83 0xB7 0x1B 0x10
			0x82 0xB8 0x00
			0x82 0xB9 0x00
			0x82 0xBA 0x00
			0x82 0xBB 0x00
			0x82 0xBC 0x00
			0x86 0xBD 0x03 0x03 0x03 0x00 0x01
			0x82 0xC0 0x03
			0x82 0xC1 0x05
			0x82 0xC2 0x03
			0x82 0xC3 0x05
			0x82 0xC4 0x80
			0x82 0xC5 0xA2
			0x82 0xC6 0x80
			0x82 0xC7 0xA2
			0x83 0xC8 0x01 0x20
			0x83 0xC9 0x00 0x20
			0x83 0xCA 0x01 0x00
			0x83 0xCB 0x00 0x00
			0x84 0xCC 0x00 0x00 0x01
			0x84 0xCD 0x00 0x00 0x01
			0x84 0xCE 0x00 0x00 0x01
			0x84 0xCF 0x00 0x00 0x01
			0x82 0xD0 0x00
			0x86 0xD1 0x03 0x00 0x00 0x07 0x10
			0x86 0xD2 0x13 0x00 0x00 0x07 0x11
			0x86 0xD3 0x23 0x00 0x00 0x07 0x10
			0x86 0xD4 0x33 0x00 0x00 0x07 0x11
			0x82 0xE5 0x06
			0x82 0xE6 0x06
			0x82 0xE7 0x06
			0x82 0xE8 0x06
			0x82 0xE9 0x06
			0x82 0xEA 0x06
			0x82 0xEB 0x06
			0x82 0xEC 0x06
			0x82 0xED 0x31
			0x86 0xF0 0x55 0xAA 0x52 0x08 0x06
			0x83 0xB0 0x10 0x11
			0x83 0xB1 0x12 0x13
			0x83 0xB2 0x08 0x00
			0x83 0xB3 0x2D 0x2D
			0x83 0xB4 0x2D 0x34
			0x83 0xB5 0x34 0x2D
			0x83 0xB6 0x2D 0x34
			0x83 0xB7 0x34 0x34
			0x83 0xB8 0x02 0x0A
			0x83 0xB9 0x00 0x08
			0x83 0xBA 0x09 0x01
			0x83 0xBB 0x0B 0x03
			0x83 0xBC 0x34 0x34
			0x83 0xBD 0x34 0x2D
			0x83 0xBE 0x2D 0x34
			0x83 0xBF 0x34 0x2D
			0x83 0xC0 0x2D 0x2D
			0x83 0xC1 0x01 0x09
			0x83 0xC2 0x19 0x18
			0x83 0xC3 0x17 0x16
			0x83 0xC4 0x19 0x18
			0x83 0xC5 0x17 0x16
			0x83 0xC6 0x01 0x09
			0x83 0xC7 0x2D 0x2D
			0x83 0xC8 0x2D 0x34
			0x83 0xC9 0x34 0x2D
			0x83 0xCA 0x2D 0x34
			0x83 0xCB 0x34 0x34
			0x83 0xCC 0x0B 0x03
			0x83 0xCD 0x09 0x01
			0x83 0xCE 0x00 0x08
			0x83 0xCF 0x02 0x0A
			0x83 0xD0 0x34 0x34
			0x83 0xD1 0x34 0x2D
			0x83 0xD2 0x2D 0x34
			0x83 0xD3 0x34 0x2D
			0x83 0xD4 0x2D 0x2D
			0x83 0xD5 0x08 0x00
			0x83 0xD6 0x10 0x11
			0x83 0xD7 0x12 0x13
			0x86 0xD8 0x55 0x55 0x55 0x55 0x55
			0x86 0xD9 0x55 0x55 0x55 0x55 0x55
			0x83 0xE5 0x34 0x34
			0x83 0xE6 0x34 0x34
			0x82 0xE7 0x05
			0x86 0xF0 0x55 0xAA 0x52 0x00 0x00
			0x02 0x11 0x00
			0x40 0x80
			0x02 0x29 0x00
			0x40 0x20
			0x86 0xF0 0x55 0xAA 0x52 0x08 0x01
			0x86 0xF0 0x55 0xAA 0x52 0x00 0x00
			0x82 0x53 0x2C
		>;
		mipi-cmds-disable = /bits/ 8 <
			0x02 0x28 0x00
			0x02 0x10 0x00
		>;
#else
/*******************************************************************************
 * the following sequence has been extracted from UM-30165 datasheet
 * and slightly changed to use the defines available in
 * "dt-bindings/display/simple_panel_mipi_cmds.h"
 ******************************************************************************/
		mipi-cmds-init = /bits/ 8 <
			//========== Page 0 relative ==========
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x08,0x00)
			DCS_L2P(0xB1,0x68,0x21)
			DCS_L2P(0xB5,0xC8,0x00)
			DCS_S1P(0xBC,0x00)
			DCS_L5P(0xBD,0xA4,0xBE,0x10,0x10,0x01)
			DCS_S1P(0xC8,0x80)
			//========== Page 1 relative ==========
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x08,0x01)
			DCS_S1P(0xB3,0x26)
			DCS_S1P(0xB4,0x0F)
			DCS_S1P(0xBB,0x06)
			DCS_S1P(0xBC,0x90)
			DCS_S1P(0xBD,0x90)
			DCS_S1P(0xBE,0x7d)
			//========== Page 2 relative ==========
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x08,0x02)
			DCS_S1P(0xEE,0x01)
			//U16 B0[17]={0xB0,0x00,0x00,0x00,0x0C,0x00,0x22,0x00,0x35,0x00,0x47,0x00,0x59,0x00,0x69,0x00,0x78};
			//U16 B1[17]={0xB1,0x00,0x85,0x00,0xB2,0x00,0xD8,0x01,0x16,0x01,0x49,0x01,0x9A,0x01,0xDD,0x01,0xDF};
			//U16 B2[17]={0xB2,0x02,0x1F,0x02,0x65,0x02,0x8F,0x02,0xC3,0x02,0xE6,0x03,0x12,0x03,0x20,0x03,0x30};
			//U16 B3[13]={0xB3,0x03,0x3F,0x03,0x50,0x03,0x64,0x03,0x7B,0x03,0xEA,0x03,0xFF};
			//U16 E9[11]={0xE9,0x06,0x01,0x61,0x16,0x10,0x06,0x01,0x61,0x16,0x10};
			//U16 EA[11]={0xEA,0x06,0x01,0x61,0x16,0x10,0x06,0x01,0x61,0x16,0x10};
			//U16 EB[11]={0xEB,0x06,0x01,0x61,0x16,0x10,0x06,0x01,0x61,0x16,0x10};
			//DCS_Long_Write_FIFO(17,B0)
			//DCS_Long_Write_FIFO(17,B1)
			//DCS_Long_Write_FIFO(17,B2)
			//DCS_Long_Write_FIFO(13,B3)
			//DCS_Long_Write_FIFO(11,E9)
			//DCS_Long_Write_FIFO(11,EA)
			//DCS_Long_Write_FIFO(11,EB)
			17 0xB0 0x00 0x00 0x00 0x0C 0x00 0x22 0x00 0x35 0x00 0x47 0x00 0x59 0x00 0x69 0x00 0x78
			17 0xB1 0x00 0x85 0x00 0xB2 0x00 0xD8 0x01 0x16 0x01 0x49 0x01 0x9A 0x01 0xDD 0x01 0xDF
			17 0xB2 0x02 0x1F 0x02 0x65 0x02 0x8F 0x02 0xC3 0x02 0xE6 0x03 0x12 0x03 0x20 0x03 0x30
			13 0xB3 0x03 0x3F 0x03 0x50 0x03 0x64 0x03 0x7B 0x03 0xEA 0x03 0xFF
			11 0xE9 0x06 0x01 0x61 0x16 0x10 0x06 0x01 0x61 0x16 0x10
			11 0xEA 0x06 0x01 0x61 0x16 0x10 0x06 0x01 0x61 0x16 0x10
			11 0xEB 0x06 0x01 0x61 0x16 0x10 0x06 0x01 0x61 0x16 0x10
			//========== Page 3 relative ==========
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x08,0x03)
			DCS_L5P(0xB2,0x00,0x0B,0x08,0x0A,0x08)
			DCS_L5P(0xB3,0x00,0x09,0x06,0x0A,0x08)
			DCS_L4P(0xBA,0x44,0x00,0x0A,0x08)
			DCS_L3P(0xC0,0x00,0x0A,0x08)
			DCS_L3P(0xC1,0x00,0x0A,0x08)
			//========== Page 4 relative ==========
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x08,0x04)
			DCS_L5P(0xB1,0x03,0x02,0x00,0x15,0x16)
			DCS_S1P(0xD3,0x01)
			//========== Page 5 relative ==========
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x08,0x05)
			DCS_S1P(0xB0,0x05)
			DCS_L2P(0xB2,0x05,0x00)
			DCS_L5P(0xB3,0x0E,0x00,0x00,0x00,0x00)
			DCS_L5P(0xB4,0x06,0x00,0x00,0x00,0x00)
			DCS_L3P(0xB7,0x06,0x00,0x00)
			DCS_L4P(0xBC,0x00,0x00,0x00,0x02)
			DCS_L5P(0xBD,0x01,0x03,0x00,0x03,0x03)
			DCS_L2P(0xC0,0x07,0x70)
			DCS_L3P(0xC4,0x00,0x00,0x01)
			DCS_L3P(0xC5,0x00,0x00,0x01)
			DCS_L5P(0xD1,0x00,0x05,0x01,0x00,0x00)
			DCS_S1P(0xE3,0x84)
			DCS_S1P(0xE5,0x1A)
			DCS_S1P(0xE6,0x1A)
			DCS_S1P(0xE8,0x1A)
			DCS_S1P(0xE9,0x1A)
			DCS_S1P(0xEA,0x1A)
			//========== Page 6 relative ==========
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x08,0x06)
			DCS_L5P(0xB0,0x30,0x31,0x2C,0x2D,0x14)
			DCS_L5P(0xB1,0x16,0x10,0x12,0x00,0x02)
			DCS_L5P(0xB2,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xB3,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xB4,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xB5,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xB6,0x03,0x01,0x13,0x11,0x17)
			DCS_L5P(0xB7,0x15,0x2D,0x2C,0x31,0x30)
			DCS_L5P(0xC0,0x31,0x30,0x2C,0x2D,0x13)
			DCS_L5P(0xC1,0x11,0x17,0x15,0x03,0x01)
			DCS_L5P(0xC2,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xC3,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xC4,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xC5,0x31,0x31,0x31,0x31,0x31)
			DCS_L5P(0xC6,0x00,0x02,0x14,0x16,0x10)
			DCS_L5P(0xC7,0x12,0x2D,0x2C,0x30,0x31)
			DCS_L4P(0xD1,0x31,0x31,0x31,0x31)
			DCS_L4P(0xD2,0x31,0x31,0x31,0x31)
		>;
		mipi-cmds-disable = /bits/ 8 <
			DCS_L5P(0xF0,0x55,0xAA,0x52,0x00,0x00)
			DCS_S1P(0x35,0x00)
		>;
		mipi-cmds-enable = /bits/ 8 <
			DCS_S0P(0x11)
			DELAY(130)
			DCS_S0P(0x29)
		>;
#endif
	};
};

&ecspi1 {
	status = "disabled"; 	/* MOSI pin conflict with RTC irq */
};

&iomuxc {
	pinctrl-names = "default";

	imx8m-var-dart {
		pinctrl_bq25895: bq25895grp {
			fsl,pins = <
				MX8MQ_IOMUXC_SAI1_RXFS_GPIO4_IO0	0x19	/* charger enable */
				MX8MQ_IOMUXC_SAI1_RXC_GPIO4_IO1		0x19	/* charger interrupt */
			>;
		};

		pinctrl_gpio_inputs: gpioinputsgrp {
			fsl,pins = <
				MX8MQ_IOMUXC_SD2_WP_GPIO2_IO20		0x19	/* GPIO220 */
				MX8MQ_IOMUXC_GPIO1_IO01_GPIO1_IO1	0x19	/* GPIO101 */
				MX8MQ_IOMUXC_NAND_CE0_B_GPIO3_IO1	0x19	/* GPIO301 */
				MX8MQ_IOMUXC_NAND_CE2_B_GPIO3_IO3	0x19	/* GPIO303 */
				MX8MQ_IOMUXC_NAND_DATA00_GPIO3_IO6	0x19	/* GPIO306 */
				MX8MQ_IOMUXC_NAND_DATA01_GPIO3_IO7	0x19	/* GPIO307 */
				MX8MQ_IOMUXC_NAND_DATA02_GPIO3_IO8	0x19	/* GPIO308 */
				MX8MQ_IOMUXC_NAND_READY_B_GPIO3_IO16	0x19	/* GPIO316 */
			>;
		};

		pinctrl_gpio_outputs: gpiooutputsgrp {
			fsl,pins = <
				MX8MQ_IOMUXC_NAND_DATA03_GPIO3_IO9	0x19	/* GPIO309 */
				MX8MQ_IOMUXC_NAND_DATA04_GPIO3_IO10	0x19	/* GPIO310 */
				MX8MQ_IOMUXC_NAND_DQS_GPIO3_IO14	0x19	/* GPIO314 */
				MX8MQ_IOMUXC_NAND_RE_B_GPIO3_IO15	0x19	/* GPIO315 */
				MX8MQ_IOMUXC_SAI5_RXD1_GPIO3_IO22	0x19	/* GPIO322 */
				MX8MQ_IOMUXC_SAI5_RXD3_GPIO3_IO24	0x19	/* GPIO324 */
				MX8MQ_IOMUXC_SAI5_MCLK_GPIO3_IO25	0x19	/* GPIO325 */
				MX8MQ_IOMUXC_UART4_RXD_GPIO5_IO28	0x19	/* USB1_TRIGn */
				MX8MQ_IOMUXC_UART4_TXD_GPIO5_IO29	0x19	/* USB1_PWREN */
			>;
		};

		pinctrl_lcd: lcdgrp {
			fsl,pins = <
				MX8MQ_IOMUXC_GPIO1_IO13_GPIO1_IO13	0x19	/* display reset */
			>;
		};

		pinctrl_ltc3370: ltc3370grp {
			fsl,pins = <
				MX8MQ_IOMUXC_NAND_WE_B_GPIO3_IO17	0x19	/* PMIC_EN3 */
				MX8MQ_IOMUXC_NAND_WP_B_GPIO3_IO18	0x19	/* PMIC_EN2 */
				MX8MQ_IOMUXC_SAI5_RXFS_GPIO3_IO19	0x19	/* PMIC_EN4 */
				MX8MQ_IOMUXC_SAI5_RXC_GPIO3_IO20	0x19	/* PMIC_EN4 */
			>;
		};

		pinctrl_m41t62: m41t62grp {
			fsl,pins = <
				MX8MQ_IOMUXC_ECSPI1_MOSI_GPIO5_IO7	0x19	/* rtc interrupt */
			>;
		};

		pinctrl_maxtouch: maxtouchgrp {
			fsl,pins = <
				MX8MQ_IOMUXC_GPIO1_IO03_GPIO1_IO3	0x19	/* cap touch reset */
				MX8MQ_IOMUXC_GPIO1_IO10_GPIO1_IO10	0x19	/* cap touch interrupt */
			>;
		};

		pinctrl_pwm2: pwm2grp {
			fsl,pins = <
				MX8MQ_IOMUXC_SPDIF_RX_PWM2_OUT		0x06	/* pwm2 output */
			>;
		};
	};
};

&i2c2 {
	/delete-node/ rtc@0x68;		/* address conflict with m41t62 */

	maxtouch: maxtouch@4a {
		compatible = "atmel,maxtouch";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_maxtouch>;
		interrupt-parent = <&gpio1>;
		interrupts = <10 GPIO_ACTIVE_LOW>;
		reset-gpios = <&gpio1 3 GPIO_ACTIVE_LOW>;
		reg = <0x4a>;
		status = "okay";
	};

	vcnl4200_2: vcnl4200_2@51 {
		compatible = "vishay,vcnl4200";
		reg = <0x51>;
		status = "okay";
	};

	m41t62: m41t62@68 {
		compatible = "st,m41t62";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_m41t62>;
		interrupt-parent = <&gpio5>;
		interrupts = <7 GPIO_ACTIVE_LOW>;
		reg = <0x68>;
		status = "okay";
	};
};

&i2c3 {
	vcnl4200_3: vcnl4200_3@51 {
		compatible = "vishay,vcnl4200";
		reg = <0x51>;
		status = "okay";
	};

	bq25895: bq25895@6a {
		compatible = "ti,bq25890";
		pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_bq25895>;
		interrupt-parent = <&gpio4>;
		interrupts = <1 GPIO_ACTIVE_LOW>;
		reg = <0x6a>;
		status = "okay";
		ti,battery-regulation-voltage = <4160000>;
		ti,charge-current = <3584000>;
		ti,termination-current = <64000>;
		ti,precharge-current = <128000>;
		ti,minimum-sys-voltage = <3000000>;
		ti,boost-voltage = <5000000>;
		ti,boost-max-current = <1000000>;
		ti,use-ilim-pin;
		ti,thermal-regulation-threshold = <120>;
	};
};

&i2c4 {
	max11615: max11615@33 {
		compatible = "maxim,max11615";
		reg = <0x33>;
	};
};

&hdmi {
	status = "disabled";
};

&dcss {
	status = "okay";
	disp-dev = "mipi_disp";

	clocks = <&clk IMX8MQ_CLK_DISP_APB_ROOT>,
		 <&clk IMX8MQ_CLK_DISP_AXI_ROOT>,
		 <&clk IMX8MQ_CLK_DISP_RTRM_ROOT>,
		 <&clk IMX8MQ_CLK_DC_PIXEL>,
		 <&clk IMX8MQ_CLK_DUMMY>,
		 <&clk IMX8MQ_CLK_DISP_DTRC>;
	clock-names = "apb", "axi", "rtrm", "pix_div", "pix_out", "dtrc";

	assigned-clocks = <&clk IMX8MQ_CLK_DC_PIXEL>,
			  <&clk IMX8MQ_CLK_DISP_AXI>,
			  <&clk IMX8MQ_CLK_DISP_RTRM>,
			  <&clk IMX8MQ_VIDEO_PLL1_REF_SEL>,
			  <&clk IMX8MQ_VIDEO_PLL1>;
	assigned-clock-parents = <&clk IMX8MQ_VIDEO_PLL1_OUT>,
				 <&clk IMX8MQ_SYS1_PLL_800M>,
				 <&clk IMX8MQ_SYS1_PLL_800M>,
				 <&clk IMX8MQ_CLK_25M>;
	assigned-clock-rates = <600000000>,
			       <800000000>,
			       <0>,
			       <400000000>,
			       <599999999>;

	dcss_disp0: port@0 {
		reg = <0>;

		dcss_disp0_mipi_dsi: mipi_dsi {
			remote-endpoint = <&mipi_dsi_in>;
		};
	};
};

&mipi_dsi_phy {
	status = "okay";
};

&mipi_dsi {
	status = "okay";
	assigned-clocks = <&clk IMX8MQ_CLK_DSI_PHY_REF>,
			  <&clk IMX8MQ_CLK_DSI_CORE>,
			  <&clk IMX8MQ_VIDEO_PLL1_REF_SEL>,
			  <&clk IMX8MQ_VIDEO_PLL1>;
	assigned-clock-parents = <&clk IMX8MQ_VIDEO_PLL1_OUT>,
				 <&clk IMX8MQ_SYS1_PLL_266M>,
				 <&clk IMX8MQ_CLK_25M>;
	assigned-clock-rates = <24000000>,
			       <266000000>,
			       <0>,
			       <599999999>;

	port@1 {
		mipi_dsi_in: endpoint {
			remote-endpoint = <&dcss_disp0_mipi_dsi>;
		};
	};

};

&mipi_dsi_bridge {
	status = "okay";

	/delete-node/ port@1;		/* duplicate label 'mipi_dsi_bridge_out' */

	panel@0 {
		compatible = "panel,simple";
		reg = <0>;
		pinctrl-0 = <&pinctrl_lcd>;
		reset-gpio = <&gpio1 13 GPIO_ACTIVE_LOW>;
		bus-format = "rgb888";
		dsi-format = "rgb888";
		dsi-lanes = <4>;
		mipi-cmds = <&mipi_cmds_nt35521z>;
		mode-video;
		mode-video-burst;
		panel-width-mm = <62>;
		panel-height-mm = <110>;

		display-timings {
			timing {
				clock-frequency = <65000000>;
				hactive = <720>;
				vactive = <1280>;
				hfront-porch = <44>;
				hback-porch = <55>;
				hsync-len = <11>;
				hsync-active = <0>;
				vfront-porch = <15>;
				vback-porch = <14>;
				vsync-len = <1>;
				vsync-active = <0>;
				de-active = <0>;
				pixelclk-active = <0>;
			};
		};

		port {
			panel0_in: endpoint {
				remote-endpoint = <&mipi_dsi_bridge_out>;
			};
		};
	};

	port@2 {
		mipi_dsi_bridge_out: endpoint {
			remote-endpoint = <&panel0_in>;
		};
	};
};

&ov5640_mipi1 {
	status = "disabled"; 	/* reset pin conflict with USB1_TRIGn */
};

&pcie0 {
	status = "disabled"; 	/* not mounted */
};

&pwm2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_pwm2>;
	status = "okay";
};

&typec_ptn5150 {
	status = "disabled";	/* connect pin conflict with maxtouch irq */
};

&usb_dwc3_0 {
	extcon = <>;	/* no typec@3d */
};
